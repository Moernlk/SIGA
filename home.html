<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <title>HomePage</title>
    <link rel="icon" type="image/x-icon" href="/img/home/home.png" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/background.css" />
    <link rel="stylesheet" href="styles/comandcenter.css" />
    <link rel="stylesheet" href="styles/secd-btns.css" />
    <link rel="stylesheet" href="/styles/agenda/calendario-index.css" />

    <style>
      * {
        -webkit-user-drag: none;
        pointer-events: unset;
      }
      .geral-page {
        display: flex;
        position: absolute;
        flex-direction: column;
        justify-content: start;
        background-color: black;
        border: 3px solid black;
        width: 25dvw;

        top: 50%;
        left: 50%;
        height: fit-content;
        min-height: 25dvh;
        box-shadow: 1px 1px 100px;
        z-index: 1;
        transition: box-shadow 2s;
      }
      .geral-page:active {
        box-shadow: 1px 1px 150px;
        transition: box-shadow 2s;
      }

      .mover {
        position: relative;
        height: 100%;
        width: fit-content;
        font-size: 30px;
        padding-left: 10px;
        padding-right: 10px;

        color: whitesmoke;
        padding-bottom: 0;
        background-color: black;
        border: none;

        user-select: none;
      }
      .mover:hover {
        cursor: move;
      }

      .uprline {
        position: relative;
        display: flex;
        justify-content: end;

        width: 100%;
        height: fit-content;
        border: rgb(255, 255, 255) 1px;
      }
      .btn-close {
        position: relative;
        height: 100%;
        width: fit-content;
        font-size: 30px;
        padding-left: 10px;
        padding-right: 10px;

        color: whitesmoke;
        padding-bottom: 0;
        background-color: black;
        border: none;
      }
      .btn-close:hover {
        cursor: pointer;
      }
      .main-page {
        display: flex;
        position: relative;

        flex-direction: column;
        width: 100%;
        border: none;
        border-top: 1px solid #87a9ba94;
        height: 22dvh;
      }
    </style>
  </head>

  <body id="body">
    <!--BACKGROUND-->
    <script type="text/javascript">
      const body = document.getElementById("body");

      function bg() {
        body.innerHTML =
          '<object type="text/html" data="background.html" id="bac"></object>';
        const bgd = document.createElement("div");
        bgd.id = "bac";
        const background = document.getElementById("bac");
        background.style.width = "100dvw";
        background.style.height = "100dvh";
        background.style.position = "absolute";
        background.style.left = 0;
        background.style.top = 0;
        background.style.zIndex = 0;
        body.appendChild(bgd);
      }
      bg();
    </script>
    <!--PAGINAS-->
    <script type="text/javascript">
      /*

      CRIAR FUNÇÃO QUE CRIE UMA PAGINA PARA CADA FUNÇÃO


      */
      var contagem = 0;
      function criarPagina() {
        contagem = contagem + 1;

        console.log(contagem);
        const page = document.createElement("div");
        page.className = "geral-page";
        page.id = contagem;
        const uprline = document.createElement("div");
        uprline.className = "uprline";
        uprline.id = contagem;
        const mover = document.createElement("div");
        mover.className = "mover";
        mover.id = contagem;
        mover.innerHTML =
          '<img class="sec-btn-img" src="/img/moverpfvr.png" />';
        const bt_close = document.createElement("button");
        bt_close.id = contagem;
        bt_close.innerHTML =
          '<img class="sec-btn-img" id="" src="/img/home/closer.png" />';
        bt_close.addEventListener("mousedown", function (e) {
          contagem = contagem - 1;
          page.remove();
          console.log(contagem);
        });
        bt_close.className = "btn-close";
        const main_page = document.createElement("div");
        page.innerHTML = "";
        main_page.className = "main-page";

        mover.addEventListener(
          "mousedown",
          function (e) {
            isDown = true;
            var pai_id = Math.abs(findparentid(e.target));
            console.log("pai_id: ", pai_id);
            console.log("contagem: ", contagem);
            position = [
              vo[contagem - pai_id].offsetLeft - e.clientX,
              vo[contagem - pai_id].offsetTop - e.clientY,
            ];
            loc = 4;
          },
          true
        );

        body.appendChild(page);
        page.appendChild(uprline);
        uprline.appendChild(mover);
        uprline.appendChild(bt_close);

        page.appendChild(main_page);
      }

      const page = document.createElement("div");
      page.className = "geral-page";

      const uprline = document.createElement("div");
      uprline.className = "uprline";

      const mover = document.createElement("div");
      mover.classList = "mover";

      mover.innerHTML = '<img class="sec-btn-img" src="/img/moverpfvr.png" />';
      const bt_close = document.createElement("button");
      bt_close.innerHTML =
        '<img class="sec-btn-img" src="/img/home/closer.png" />';
      bt_close.addEventListener("mousedown", function (e) {
        page.remove();
        contagem = contagem - 1;
      });

      bt_close.className = "btn-close";

      const main_page = document.createElement("div");

      page.innerHTML = "";

      main_page.className = "main-page";

      body.appendChild(page);
      page.appendChild(uprline);
      uprline.appendChild(mover);
      uprline.appendChild(bt_close);

      page.appendChild(main_page);

      function findparentid(neto) {
        console.log(neto);
        const pai_cn = neto.parentElement;
        const parent_cn = pai_cn.parentElement;
        console.log(parent_cn);

        var gparent_cn = parent_cn.parentElement.id;
        var page_click = gparent_cn - contagem;
        console.log(page_click);
        console.log(parseInt(gparent_cn));
        const pai = document.getElementsByClassName(pai_cn);
        const vo = document.getElementsByClassName(gparent_cn);
        return page_click;
      }
    </script>

    <!-- PAINEL DE CONTROLE-->
    <div
      class="conteiner"
      id="conteiner"
      style="justify-content: center; align-items: center"
    >
      <div class="comand-center-index" style="align-self: self-start">
        <!-- AGENDA -->
        <div
          class="cnt"
          id="area-btn-agenda"
          style="position: absolute; left: -5dvw"
        >
          <button class="btn-agenda" id="btn-agenda">
            <span class="movivel"></span>
            <div>
              <img class="prg-btn-img" src="/img/agenda/agenda.png" />
            </div>
            <div id="agenda-name" class="popup-informations">Agenda</div>
          </button>

          <div class="agd-btns-area" id="agenda-sec-btn">
            <button class="btns-agd" id="btn-secd1">
              <a href="/calendario.html">
                <div>
                  <img class="sec-btn-img" src="/img/agenda/calendario.png" />
                </div>
                <div
                  id="calendario-name"
                  style="right: 0.3dvw"
                  class="popup-informations"
                >
                  Calendário
                </div>
              </a>
            </button>

            <button class="btns-agd" id="btn-secd4" onclick="criarPagina()">
              <div>
                <img class="sec-btn-img" src="/img/agenda/horarios.png" />
              </div>
              <div id="hora-name" class="popup-informations">Horarios</div>
            </button>

            <button class="btns-agd" id="btn-secd3" onclick="criarPagina()">
              <div>
                <img class="sec-btn-img" src="/img/agenda/provas.png" />
              </div>

              <div
                id="prova-name"
                style="left: 1dvw"
                class="popup-informations"
              >
                Provas
              </div>
            </button>
          </div>
        </div>
        <!-- PROGRESSO -->
        <div class="cnt" id="area-btn-progresso" style="position: absolute">
          <button class="btn-progresso" id="btn-progresso">
            <span class="movivel"></span>

            <div>
              <img class="prg-btn-img" src="/img/progresso/progress.png" />
            </div>
            <div id="progresso-name" class="popup-informations">Progresso</div>
          </button>
          <div class="prg-btns-area">
            <button class="btns-prg" id="btn-secd1">
              <div>
                <img class="sec-btn-img" src="/img/progresso/grade.png" />
              </div>
              <div id="notas-name" class="popup-informations">Notas</div>
            </button>
            <button class="btns-prg" id="btn-secd2">
              <div>
                <img class="sec-btn-img" src="/img/progresso/faltas.png" />
              </div>
              <div id="faltas-name" class="popup-informations">Faltas</div>
            </button>
            <button class="btns-prg" id="btn-secd3">
              <div>
                <img class="sec-btn-img" src="/img/progresso/materias.png" />
              </div>
              <div id="ensino-name" class="popup-informations">Matérias</div>
            </button>
            <button class="btns-prg" id="btn-secd4">
              <div>
                <img class="sec-btn-img" src="/img/progresso/historico.png" />
              </div>
              <div id="hist-name" class="popup-informations">Histórico</div>
            </button>
          </div>
        </div>
        <!-- SECRETARIA -->

        <div
          class="cnt"
          id="area-btn-recursos"
          style="position: absolute; left: 5dvw"
        >
          <button class="btn-recursos" id="btn-recursos">
            <span class="movivel"></span>

            <div>
              <img class="prg-btn-img" src="/img/recursos/recursos.png" />
            </div>
            <div id="recursos-name" class="popup-informations">Recursos</div>
          </button>

          <div class="rec-btns-area">
            <button class="btns-rec" id="btn-secd1">
              <div>
                <img class="sec-btn-img" src="/img/recursos/secretaria.png" />
              </div>
              <div id="secret-name" class="popup-informations">Secretaria</div>
            </button>
            <button class="btns-rec" id="btn-secd2">
              <div>
                <img class="sec-btn-img" src="/img/recursos/library.png" />
              </div>
              <div id="library-name" class="popup-informations">Biblioteca</div>
            </button>
            <button class="btns-rec" id="btn-secd3">
              <div>
                <img
                  class="sec-btn-img"
                  src="/img/recursos/extraCurricular1.png"
                />
              </div>
              <div id="extraC-name" class="popup-informations">
                Extra-Curriculares
              </div>
            </button>
          </div>
        </div>
      </div>

      <!--CALENDARIO-->
      <!--script src="/script/calendario.js"></script>
      <script type="text/javascript">
        const cl = document.getElementById("calendario");
        cl.style.opacity = "0";
        /* agd.addEventListener("click", function () {
          if (cl.style.opacity == "100") {
            cl.style.opacity = "0";
            agd.style.backgroundColor = "#a0ff97d2";
          } else {
            cl.style.opacity = "100";
            agd.style.backgroundColor = "whitesmoke";
          } 
        });*/
      </script !-->

      <!-- MOVIMENTO DAS DIVs -->
      <script type="text/javascript">
        //ATIVADOR POR CLICK
        var isDown = false;

        // POSIÇÃO DO CLICK
        var position = [];

        // POSIÇÃO DO MOUSE
        var mousePosition;

        //DETECTA QUAL BOTÃO FOI MOVIDO
        var loc;

        const agenda = document.getElementById("area-btn-agenda");
        const agdr = document.getElementById("btn-agenda");
        const progresso = document.getElementById("area-btn-progresso");
        const prog = document.getElementById("btn-progresso");

        const recurso = document.getElementById("area-btn-recursos");
        const recr = document.getElementById("btn-recursos");

        const pai_cn = mover.parentElement.className;
        const parent_cn = mover.parentElement;
        console.log(parent_cn);

        const gparent_cn = parent_cn.parentElement.className;
        console.log(gparent_cn);
        const pai = document.getElementsByClassName(pai_cn);
        const vo = document.getElementsByClassName(gparent_cn);
        console.log(vo);
        //console.log(pai);
        //console.log(recurso);

        // DETECTOR DOS DIVS
        agdr.addEventListener(
          "mousedown",
          function (e) {
            isDown = true;
            position = [
              agenda.offsetLeft - e.clientX,
              agenda.offsetTop - e.clientY,
            ];
            loc = 1;
          },
          true
        );

        prog.addEventListener(
          "mousedown",
          function (e) {
            isDown = true;
            position = [
              progresso.offsetLeft - e.clientX,
              progresso.offsetTop - e.clientY,
            ];
            loc = 2;
          },
          true
        );
        recr.addEventListener(
          "mousedown",
          function (e) {
            isDown = true;
            position = [
              recurso.offsetLeft - e.clientX,
              recurso.offsetTop - e.clientY,
            ];
            loc = 3;
          },
          true
        );
        mover.addEventListener(
          "mousedown",
          function (e) {
            //debugger
            isDown = true;
            var pai_id = Math.abs(findparentid(e.target));

            const son = e.target;
            const gpr = son;
            position = [
              vo[contagem - pai_id].offsetLeft - e.clientX,
              vo[contagem - pai_id].offsetTop - e.clientY,
            ];
            loc = 4;
            console.log(vo);
          },
          true
        );
        // MOVIMENTO DO MOUSE
        document.addEventListener(
          "mousemove",
          function (e) {
            e.preventDefault();
            if (isDown) {
              mousePosition = {
                x: e.clientX,
                y: e.clientY,
              };
              // OBRIGA A ESTAR DENTRO DA TELA
              var pai_id = Math.abs(findparentid(e.target));

              if (
                window.innerWidth > mousePosition.x == true &&
                mousePosition.x >= 0 == true
              ) {
                if (loc == 1) {
                  agenda.style.left = mousePosition.x + position[0] + "px";
                  agenda.style.top = mousePosition.y + position[1] + "px";
                }
                if (loc == 2) {
                  progresso.style.left = mousePosition.x + position[0] + "px";
                  progresso.style.top = mousePosition.y + position[1] + "px";
                }
                if (loc == 3) {
                  recurso.style.left = mousePosition.x + position[0] + "px";
                  recurso.style.top = mousePosition.y + position[1] + "px";
                }
                if (loc == 4) {
                  vo[contagem - pai_id].style.left =
                    mousePosition.x + position[0] + "px";
                  vo[contagem - pai_id].style.top =
                    mousePosition.y + position[1] + "px";
                }
              } else {
                isDown = false;
              }
            }
            /*           
            $(document).mouseout(function () {
              isDown = false;
            });
*/
          },
          true
        );
        // DETECTOR DA PARADA
        document.addEventListener(
          "mouseup",
          function () {
            isDown = false;
            loc = 0;
            //Jquery
          },
          true
        );

        /*const cl = document.getElementById("calendario");
        const agd = document.getElementById("btn-agenda");
        cl.style.opacity = "0";
        agd.addEventListener("click", function () {
          if (cl.style.opacity == "100") {
            cl.style.opacity = "0";
            agd.style.backgroundColor = "#a0ff97d2";
          } 
          else 
          {
       
            cl.style.opacity = "100";
            agd.style.backgroundColor = "whitesmoke";
         
          }
        });*/
      </script>
    </div>
  </body>
</html>
